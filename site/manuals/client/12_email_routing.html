<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>その手があったか！0円で独自ドメインメール（Cloudflare Email Routing） | Webをつくるしごと</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;700&display=swap">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        body { font-family: 'Noto Sans JP', sans-serif; line-height: 1.8; color: #333; background-color: #f4f7f6; margin: 0; padding: 0; }
        .container { max-width: 800px; margin: 0 auto; padding: 40px 20px; }
        .manual-box { background: #fff; padding: 40px; border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.05); }
        h1 { color: #f38020; border-bottom: 2px solid #eee; padding-bottom: 15px; margin-bottom: 30px; }
        h2 { font-size: 1.3rem; margin-top: 40px; margin-bottom: 15px; color: #333; border-left: 5px solid #f38020; padding-left: 15px; }
        .step-box { background: #fff8f0; border: 1px solid #ffe0b2; padding: 20px; border-radius: 8px; margin-bottom: 20px; }
        .step-number { display: inline-block; background: #f38020; color: #fff; width: 25px; height: 25px; line-height: 25px; text-align: center; border-radius: 50%; margin-right: 10px; font-weight: bold; }
        img { max-width: 100%; border: 1px solid #ddd; border-radius: 4px; margin-top: 10px; }
        .alert { background: #e3f2fd; color: #0d47a1; padding: 15px; border-radius: 8px; margin-top: 20px; font-weight: bold; }
        /* Floating Button */
        .back-to-top {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 50px;
            height: 50px;
            background: #06c755;
            color: #fff;
            border-radius: 50%;
            text-align: center;
            line-height: 50px;
            font-size: 1.5rem;
            text-decoration: none;
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s;
            z-index: 1000;
        }
        .back-to-top.show {
            opacity: 1;
            visibility: visible;
        }
        .back-to-top:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 15px rgba(0,0,0,0.3);
        }
        .back-to-index {
            position: fixed;
            bottom: 90px;
            right: 30px;
            width: auto;
            min-width: 140px;
            height: 50px;
            background: #fff;
            color: #06c755;
            border: 2px solid #06c755;
            border-radius: 25px;
            text-align: center;
            line-height: 46px;
            font-size: 1rem;
            font-weight: bold;
            text-decoration: none;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s;
            z-index: 1000;
            white-space: nowrap;
            padding: 0 20px;
        }
        .back-to-index.show {
            opacity: 1;
            visibility: visible;
        }
        .back-to-index:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 15px rgba(0,0,0,0.2);
            background: #06c755;
            color: #fff;
        }
        .line-support {
            position: fixed;
            bottom: 150px;
            right: 30px;
            width: auto;
            min-width: 140px;
            height: 50px;
            background: #06c755;
            color: #fff;
            border-radius: 25px;
            text-align: center;
            line-height: 50px;
            font-size: 1rem;
            font-weight: bold;
            text-decoration: none;
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s;
            z-index: 1000;
            white-space: nowrap;
            padding: 0 20px;
        }
        .line-support.show {
            opacity: 1;
            visibility: visible;
        }
        .line-support:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 15px rgba(0,0,0,0.3);
            border: 2px solid #fff;
        }
        @media (max-width: 768px) {
            .back-to-top, .back-to-index, .line-support {
                display: none !important;
            }
        }

    </style>
</head>
<body>
    <div class="container">
        <div class="manual-box">
            <h1>0円で独自ドメインメールを作る</h1>
            <p>Cloudflareの「Email Routing（メール転送）」機能を使えば、サーバー代を払わずに<code>info@web-tsukuru.jp</code>のような独自ドメインのメールアドレスを持つことができます。<br>
            届いたメールは、普段使っているGmailなどに自動転送されます。</p>

            <div class="alert">
                💡 この設定でできること<br>
                ・独自ドメイン宛のメール（例: contact@web-tsukuru.jp）を、無料で作れる。<br>
                ・届いたメールは、指定したGmail等で受信できる。<br>
                （※ここでの設定は「受信（転送）」専用です）
            </div>

            <div id="content-area">
                
                <h2>STEP 1: メール設定画面を開く</h2>
                <div class="step-box">
                    <span class="step-number">1</span> Cloudflareの左メニューから<strong>「メール アドレス」</strong>→<strong>「Email Routing」</strong>を選択<br>
                    <img src="images/12_cf_email_menu.png" alt="メールアドレスメニュー" style="margin-bottom: 15px;"><br>
                    <span class="step-number">2</span> 画面中央の青いボタン<strong>「始める」</strong>（または Get started）をクリック<br>
                    <img src="images/14_cf_email_get_started.png" alt="Email Routing開始画面" style="margin-bottom: 15px;">
                </div>

                <h2>STEP 2: 転送用アドレスを作成</h2>
                <div class="step-box">
                    <span class="step-number">3</span> <strong>カスタムアドレス</strong>：作りたいメールアドレスを入力（例：info）<br>
                    <span class="step-number">4</span> <strong>宛先</strong>：転送先の自分のメールアドレスを入力（例：test@gmail.com）<br>
                    <img src="images/15_cf_email_create_input.png" alt="アドレス入力画面" style="margin-bottom: 15px;"><br>
                    <span class="step-number">5</span> <strong>「作成して続行する」</strong>をクリック
                </div>
                
                <h2>STEP 3: 宛先アドレスの確認</h2>
                <div class="step-box">
                    <span class="step-number">6</span> Gmailに届いた確認メール内のボタンを押すと、Cloudflareの画面が「確認済み」に変わります。<br>
                    <img src="images/16_cf_email_verified.png" alt="認証完了画面" style="margin-bottom: 15px;"><br>
                    <span class="step-number">7</span> <strong>「続行」</strong>をクリック
                </div>

                <h2>STEP 4: レコードの追加</h2>
                <div class="step-box">
                    <span class="step-number">8</span> 次の画面で「競合するレコード」や「必要なレコード」が表示されます。<br>
                    <img src="images/17_cf_email_dns_records.png" alt="DNSレコード追加画面" style="margin-bottom: 15px;"><br>
                    <span class="step-number">9</span> 画面下の青いボタン<strong>「レコードを追加して有効にする」</strong>をクリック<br>
                    <br>
                    <div class="alert" style="background:#fff3e0; color:#e65100; font-size:0.9rem;">
                        <strong>⚠️ ボタンが押せない場合</strong><br>
                        上にある「競合するレコード」の横に赤い文字で<strong>「削除（Delete）」</strong>と書かれていませんか？<br>
                        もしあれば、先にその「削除」を押して不要なレコードを消してください。<br>
                        <img src="images/18_cf_email_delete_confirm.png" alt="削除確認ポップアップ" style="margin-bottom: 5px;"><br>
                        確認画面が出たら、迷わず<strong>「削除」</strong>（赤いボタン）を押してOKです。
                    </div>
                    <br>
                    <img src="images/19_cf_email_ready_to_enable.png" alt="ボタンが有効になった状態" style="margin-bottom: 15px;"><br>
                    邪魔なレコードが消えるとボタンが青くなります。<br>
                    <strong>「レコードを追加して有効にする」</strong>をクリックしてください。<br>
                    <br>
                    以下のように<strong>「有効（Enabled）」</strong>かつ<strong>「メール DNS レコード設定されました」</strong>（緑色の表示）になれば、全ての設定完了です！🎉<br>
                    <img src="images/21_cf_email_enabled.png" alt="設定完了ダッシュボード" style="margin-bottom: 15px;"><br>
                    これで、<code>info@web-tsukuru.jp</code> 宛のメールがご自身のGmailに届くようになりました！
                </div>

                <hr style="margin: 40px 0; border: 0; border-top: 2px dashed #ddd;">

                <h1>【発展編】送信もできるようにする</h1>
                <p>受信したメールに返信する際、相手に <code>info@web-tsukuru.jp</code> から送ったように見せる設定です。<br>
                これにはGoogleアカウントの<strong>「アプリパスワード」</strong>という特別なパスワードを使います。</p>

                <h2>STEP 5: Googleアプリパスワードの発行</h2>
                <div class="step-box">
                    <span class="step-number">1</span> Googleアカウント（<a href="https://myaccount.google.com/" target="_blank">myaccount.google.com</a>）にアクセス<br>
                    <span class="step-number">2</span> 左メニュー<strong>「セキュリティとログイン」</strong>をクリック<br>
                    <img src="images/22_google_account_menu.png" alt="Googleアカウントメニュー" style="margin-bottom: 15px;"><br>
                    <span class="step-number">3</span> リストの一番上にある<strong>「2段階認証プロセス」</strong>をクリック<br>
                    <img src="images/23_google_2sv_menu.png" alt="Googleアカウントメニュー" style="margin-bottom: 15px;"><br>
                    <span class="step-number">3</span> 画面の一番上にある<strong>「検索窓」</strong>を使います。（これが一番早いです！）<br>
                    <span class="step-number">4</span> <strong>「アプリ」</strong>と入力して、出てきた候補の<strong>「アプリ パスワード」</strong>をクリック<br>
                    <img src="images/25_google_search_app_pass.png" alt="アプリパスワード検索" style="margin-bottom: 15px;"><br>
                    <span class="step-number">5</span> アプリ名に適当な名前（例：Cloudflare）を入力して「作成」<br>
                    <span class="step-number">6</span> <strong>16桁のパスワード</strong>が表示されるので、コピーしてメモ帳などに控える<br>
                    <div class="alert" style="background:#fff3e0; color:#e65100;"><br>
                    <span class="step-number">6</span> <strong>16桁のパスワード</strong>が表示されるので、コピーしてメモ帳などに控える<br>
                    <div class="alert" style="background:#fff3e0; color:#e65100;">
                        ⚠️ このパスワードは後で1回だけ使います。画面を閉じると二度と見れないので必ずコピーしてください！
                    </div>
                </div>

                <h2>STEP 6: Gmailで送信設定を追加</h2>
                <div class="step-box">
                    <span class="step-number">6</span> Gmailの右上「歯車マーク」→<strong>「すべての設定を表示」</strong><br>
                    <img src="images/26_gmail_settings_menu.png" alt="Gmail設定メニュー" style="margin-bottom: 15px;"><br>
                    <span class="step-number">7</span> <strong>「アカウントとインポート」</strong>タブをクリック<br>
                    <img src="images/27_gmail_accounts_tab.png" alt="アカウントとインポート" style="margin-bottom: 15px;"><br>
                    <span class="step-number">8</span> 「名前:」のところにある<strong>「他のメールアドレスを追加」</strong>をクリック<br>
                    <img src="images/28_gmail_add_address_link.png" alt="他のメールアドレスを追加" style="margin-bottom: 15px;"><br>
                    <br>
                    <strong>【開いた画面での入力内容】</strong><br>
                    <ul>
                        <li><strong>名前</strong>：相手に表示したい名前（例：Webをつくるしごと）</li>
                        <li><strong>メールアドレス</strong>：<code>info@web-tsukuru.jp</code></li>
                        <li>「エイリアスとして扱います」：チェックを入れたまま</li>
                        <li>→「次のステップ」をクリック</li>
                    </ul>
                    <img src="images/29_gmail_popup_input.png" alt="メールアドレス追加ポップアップ" style="margin-bottom: 15px;"><br>
                </div>

                <h2>STEP 7: SMTPサーバーの設定（重要）</h2>
                <div class="step-box">
                    <p>ここが一番の難関です。<br>
                    下の画像のように、最初から <code>route2...</code> や <code>info</code> が入力されていますが、<strong>これらは使いません！</strong></p>
                    <img src="images/30_gmail_smtp_default.png" alt="デフォルトのSMTP設定" style="margin-bottom: 5px;">
                    <p style="text-align:center; font-size:0.8rem; color:#666; margin-bottom: 20px;">▲これはダメな例（全部消してください）</p>
                    
                    <p>これらを<strong>全て消して</strong>、以下のように書き換えてください（これが正解です👇）。</p>
                    <img src="images/31_gmail_smtp_correct.png" alt="正しいSMTP設定" style="margin-bottom: 15px;"><br>
                    
                    <ul>
                        <li><strong>SMTPサーバー</strong>：<code>smtp.gmail.com</code></li>
                        <li><strong>ポート</strong>：<code>587</code></li>
                        <li><strong>ユーザー名</strong>：<code>あなたのGmailアドレス（例：yourname@gmail.com）</code><br><span style="font-size:0.8em; color:red;">※info〜ではありません！元のGmailアドレスです</span></li>
                        <li><strong>パスワード</strong>：さっきコピーした<strong>「16桁のアプリパスワード」</strong><br><span style="font-size:0.8em; color:#666;">（※スペースが入ったままで大丈夫です！）</span></li>
                        <li><strong>TLSを使用した...</strong>：チェック（推奨）</li>
                    </ul>
                    →<strong>「アカウントを追加」</strong>をクリック
                </div>

                <h2>STEP 8: 確認コードの入力</h2>
                <div class="step-box">
                    <span class="step-number">9</span> 以下のようなメールがGmailに届けば成功です！（受信ができている証拠です）<br>
                    <img src="images/33_gmail_confirm_email.png" alt="Gmail確認メール" style="margin-bottom: 15px;"><br>
                    
                    <span class="step-number">10</span> メール内の<strong>長いリンク</strong>をクリックして、出てきた画面で「確認」ボタンを押す<br>
                    <span class="step-number">11</span> 以下の画面が出れば完了です！<br>
                    <img src="images/35_gmail_complete.png" alt="確認完了画面" style="margin-bottom: 15px;"><br>
                    <br>
                    <strong>これですべての設定が完了です！お疲れ様でした！🎉</strong><br>
                    メール作成時に「差出人」を <code>info@web-tsukuru.jp</code> に切り替えられるようになっています。<br>
                    （※反映まで少し時間がかかる場合がありますが、一度Gmailを再読み込みすると出てきます）
                </div>

                <h2>STEP 9: 【使い方】送信元の切り替え</h2>
                <div class="step-box">
                    <p>メールを送るときは、以下の手順で差出人を切り替えます。</p>
                    <ol>
                        <li>Gmailの<strong>「作成（＋）」</strong>ボタンを押す</li>
                        <li><strong>「差出人（From）」</strong>のところにある自分のメールアドレスをクリック</li>
                        <img src="images/36_gmail_send_as.png" alt="差出人の切り替え" style="margin-top: 10px; margin-bottom: 10px; border: 2px solid #e74c3c;">
                        <li>リストから <code>info@web-tsukuru.jp</code> を選択</li>
                    </ol>
                    <p>これで、相手には「info@...」からのメールとして届きます！</p>
                </div>

            </div>
        </div>
    </div>
    <a href="#" id="lineSupport" class="line-support"> LINEで相談</a>
    <a href="index.html" id="backToIndex" class="back-to-index"> 一覧に戻る</a>
    <a href="#" id="backToTop" class="back-to-top"><i class="fa-solid fa-arrow-up"></i></a>

    <script>
        const backToTop = document.getElementById('backToTop');
        const backToIndex = document.getElementById('backToIndex');
        const lineSupport = document.getElementById('lineSupport');

        window.addEventListener('scroll', () => {
            if (window.scrollY > 300) {
                backToTop.classList.add('show');
                backToIndex.classList.add('show');
                lineSupport.classList.add('show');
            } else {
                backToTop.classList.remove('show');
                backToIndex.classList.remove('show');
                lineSupport.classList.remove('show');
            }
        });

        backToTop.addEventListener('click', (e) => {
            e.preventDefault();
            window.scrollTo({ top: 0, behavior: 'smooth' });
        });

        lineSupport.addEventListener('click', (e) => {
            e.preventDefault();
            window.open('https://lin.ee/eKNHAte', '_blank');
        });
    </script>

</body>
</html>
