<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Webサイト公開・運用マニュアル | Special Bonus Content</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/style.css">
    <style>
        /* 簡易ロック用のスタイル */
        #lock-screen {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: #1e293b;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 9999;
            color: #fff;
            flex-direction: column;
        }
        .lock-box {
            background: #fff;
            padding: 40px;
            border-radius: 8px;
            text-align: center;
            color: #333;
            max-width: 400px;
            width: 90%;
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
        }
        .lock-box h2 { margin-top: 0; font-size: 20px; color: #1e293b; }
        .lock-box input {
            width: 100%;
            padding: 12px;
            margin: 20px 0;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 16px;
            box-sizing: border-box;
        }
        .lock-btn {
            background: #2563eb;
            color: #fff;
            border: none;
            padding: 12px 24px;
            border-radius: 4px;
            font-weight: bold;
            cursor: pointer;
            width: 100%;
            font-size: 16px;
        }
        .lock-btn:hover { background: #1d4ed8; }
        .error-msg { color: #ef4444; font-size: 14px; margin-top: 10px; display: none; }
    </style>
</head>
<body>

    <!-- ロック画面 -->
    <div id="lock-screen">
        <div class="lock-box">
            <h2>🔒 シークレットコンテンツ</h2>
            <p style="font-size: 14px; color: #666; margin-bottom: 20px;">
                このページは購入者限定特典です。<br>
                パスワードを入力してご覧ください。
            </p>
            <input type="password" id="password" placeholder="Password">
            <button class="lock-btn" onclick="checkPass()">Webサイト公開手順を見る</button>
            <p class="error-msg" id="error-msg">パスワードが間違っています</p>
        </div>
    </div>

    <!-- メインコンテンツ (最初は非表示) -->
    <div id="main-content" style="display:none;">
        <header class="doc-header">
            <div class="container">
                <h1>Webサイト公開・運用マニュアル</h1>
                <span class="tag">保存版</span>
            </div>
        </header>

        <div class="doc-container">
            <aside class="sidebar">
                <nav class="toc">
                    <h3>目次</h3>
                    <ul>
                        <li><a href="#intro">はじめに</a></li>
                        <li><a href="#chapter1">GitHubの準備</a></li>
                        <li><a href="#chapter2">Cloudflareでの公開手順</a></li>
                        <li><a href="#chapter3">2回目以降の更新方法</a></li>
                    </ul>
                </nav>
            </aside>

            <main class="content">
                <section id="intro">
                    <h2>はじめに</h2>
                    <p>このマニュアルでは、作成したWebサイトを**無料で、プロフェッショナルな環境（Cloudflare Pages）**で公開する手順を解説します。</p>
                    <div class="alert">
                        <strong>本書のポイント</strong>
                        <ul>
                            <li>VS Codeから直接アップロードする方法</li>
                            <li>失敗しやすい「画面の選び方」を実際の画像付きで解説</li>
                            <li>ずっと無料で使い続けるための設定</li>
                        </ul>
                    </div>
                </section>

                <section id="chapter1">
                    <h2>Step 1: GitHubの準備</h2>
                    <p>Webサイトのデータを保存するための「倉庫（リポジトリ）」をGitHub上に作ります。</p>
                    
                    <div class="step-card">
                        <h3>1. 新しいリポジトリを作成</h3>
                        <p>GitHubにログインし、「Start a new repository」または右上の「+」アイコンから新規作成画面を開きます。</p>
                        <div class="img-box">
                            <img src="images/01_github_create.png" alt="GitHub作成画面">
                        </div>
                        <ul class="check-list">
                            <li><strong>Repository name</strong>: 好きな名前を入力（例: web-tsukuru）</li>
                            <li><strong>Public</strong>: 選択</li>
                            <li>他のチェックボックス（READMEなど）は全て<strong>空欄のまま</strong>にするのがコツです！</li>
                        </ul>
                    </div>

                    <div class="step-card">
                        <h3>2. VS Codeと連携</h3>
                        <p>VS Codeに戻り、作成したレポジトリのURLを登録してデータを送信（プッシュ）します。</p>
                        <p class="note">※ 初回のみコマンド操作が必要ですが、2回目以降はボタン一つで更新できます。</p>
                    </div>
                </section>
                
                </section>

                <section id="chapter2">
                    <h2>Step 2: Cloudflareでの公開手順</h2>
                    <p>ここが一番の難関ですが、画像通りに進めれば大丈夫です。</p>

                    <div class="step-card">
                        <h3>1. Workers & Pagesを開く</h3>
                        <p>Cloudflareのダッシュボードです。最初は「Workers & Pages」が見当たらないかもしれません。</p>
                        <div class="img-box">
                            <img src="images/02_cf_menu_miss.png" alt="メニューが見つからない状態">
                        </div>
                        <p>これを見つける一番確実な方法は、<strong>左上の検索バー（虫眼鏡アイコン）を使うこと</strong>です。<br>「pages」と入力すれば、すぐにメニューが出てきます。</p>
                        <div class="img-box">
                            <img src="images/03_cf_menu_hidden.png" alt="検索で見つける">
                        </div>
                    </div>

                    <div class="step-card">
                        <h3>2. アプリケーションの作成</h3>
                        <p>画面右上の青いボタン「アプリケーションを作成する」をクリックします。</p>
                        <div class="img-box">
                            <img src="images/04_cf_workers_pages.png" alt="作成ボタン">
                        </div>
                    </div>

                    <div class="step-card">
                        <h3>3. 【重要】タブの切り替え</h3>
                        <p>ここが最大のつまづきポイントです！<br>デフォルトでは「Workers（プログラム）」を作る画面になっていますが、私たちは「Pages（Webサイト）」を作りたいので、<strong>必ずタブを切り替えてください。</strong></p>
                        
                        <!-- NG例 -->
                        <div class="img-box bad">
                            <img src="images/07_wrong_worker.png" alt="間違い：Worker作成画面">
                        </div>
                        <p>▲ これは間違い！「Workerを作成」という画面だったら、タブが違います。</p>

                        <div class="alert">
                            <strong>もしこの画面に来てしまったら…</strong>
                            <p>画面の一番下を見てください。「Looking to deploy Pages? <strong>Get started</strong>」というリンクがあります。</p>
                            <p>ここをクリックするのが、正しい画面（Pages作成）への一番の近道です！</p>
                            <div class="img-box">
                                <img src="images/08_link_to_pages.png" alt="救済リンク">
                            </div>
                        </div>

                        <!-- 正解手順 -->
                        <p>正しい画面（Pages作成画面）にたどり着いたら、「既存のGitリポジトリ」の「始める」ボタンを押します。</p>
                        <div class="img-box">
                            <img src="images/09_start_pages.png" alt="正解：Pages作成画面">
                        </div>
                        <p>次に、接続先として「Connect GitHub」を選択します。</p>
                        <div class="img-box">
                            <img src="images/05_connect_git.png" alt="GitHub接続選択">
                        </div>
                    </div>

                    <div class="step-card">
                        <h3>4. GitHubとの連携</h3>
                        <p>「GitHubに接続」ボタンを押すと、認証画面が出ることがあります。「Install & Authorize」ボタンを押して許可してください。</p>
                        <div class="img-box">
                            <img src="images/06_git_auth.png" alt="GitHub認証">
                        </div>
                        <p>連携できたら、リポジトリ一覧から「web-tsukuru」を選択して「セットアップの開始」を押します。</p>
                        <div class="img-box">
                            <img src="images/10_select_repo.png" alt="リポジトリ選択">
                        </div>
                    </div>

                    <div class="step-card">
                        <h3>5. デプロイ（公開）</h3>
                        <p>設定画面になりますが、<strong>何も変更せずに</strong>一番下の「保存してデプロイ」をクリックします。</p>
                        <div class="img-box">
                            <img src="images/11_build_settings.png" alt="ビルド設定">
                        </div>
                        <p>成功画面が出れば完了です！お疲れ様でした。</p>
                        <div class="img-box">
                            <img src="images/12_success.png" alt="成功画面">
                        </div>
                    </div>
                </section>

                <section id="chapter3">
                    <h2>2回目以降の更新方法</h2>
                    <p>一度設定してしまえば、あとは簡単です。VS Codeから数クリックで更新できます。</p>

                    <div class="step-card">
                        <h3>1. 修正と保存</h3>
                        <p>VS Codeでファイルを修正し、忘れずに保存（<span class="key">Ctrl</span> + <span class="key">S</span>）します。</p>
                        <div class="img-box">
                            <img src="images/13_vscode_edit.png" alt="修正画面">
                        </div>
                    </div>

                    <div class="step-card">
                        <h3>2. ソース管理を開く</h3>
                        <p>左側のメニューから「枝分かれのアイコン（ソース管理）」をクリックします。</p>
                        <div class="img-box">
                            <img src="images/14_git_icon.png" alt="ソース管理アイコン">
                        </div>
                    </div>

                    <div class="step-card">
                        <h3>3. メッセージ入力とコミット</h3>
                        <p>変更内容のメモ（例：「画像修正」など）を入力し、「コミット」ボタンを押します。</p>
                        <div class="img-box">
                            <img src="images/15_git_message.png" alt="メッセージ入力">
                        </div>
                        <div class="img-box" style="margin-top:10px;">
                            <img src="images/16_git_commit.png" alt="コミットボタン">
                        </div>
                    </div>

                    <div class="step-card">
                        <h3>4. プッシュ（同期）</h3>
                        <p>「変更の同期（プッシュ）」という青いボタンが出てくるので、これをクリックします。</p>
                        <div class="img-box">
                            <img src="images/17_git_push.png" alt="プッシュボタン">
                        </div>
                    </div>

                    <div class="step-card">
                        <h3>完了！</h3>
                        <p>これでサーバーに送信されました。数分待つとサイトが自動更新されます。</p>
                        <div class="img-box">
                            <img src="images/18_update_done.png" alt="完了">
                        </div>
                    </div>
                </section>
            </main>
        </div>
    </div>

    <script>
        // パスワードをハッシュ化して比較する関数 (ソースを見てもパスワードがバレないように対策)
        async function sha256(message) {
            const msgBuffer = new TextEncoder().encode(message);
            const hashBuffer = await crypto.subtle.digest('SHA-256', msgBuffer);
            const hashArray = Array.from(new Uint8Array(hashBuffer));
            return hashArray.map(b => b.toString(16).padStart(2, '0')).join('');
        }

        async function checkPass() {
            const input = document.getElementById('password').value;
            const error = document.getElementById('error-msg');
            
            // 入力された値をハッシュ化して照合
            const hash = await sha256(input);
            
            // 正解のパスワード（ハッシュ値）
            const correct = 'c45928d199696edfed68c34059afc3c5e551af45af50e12121553f7dc1fb5781';

            if(hash === correct) {
                document.getElementById('lock-screen').style.display = 'none';
                document.getElementById('main-content').style.display = 'block';
                window.scrollTo(0, 0);
            } else {
                error.style.display = 'block';
            }
        }
    </script>
</body>
</html>
